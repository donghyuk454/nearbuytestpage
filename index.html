<html>
  <head>
    <style>
      html,
      body {
        display: -webkit-box;
        display: flex;
        min-height: 100%;
        -webkit-box-pack: center;
                justify-content: center;
        -webkit-box-align: center;
                align-items: center;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
                flex-direction: column;
        font-family: sans-serif;
      }

      ul,
      li {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      .tg-list {
        text-align: center;
        display: -webkit-box;
        display: flex;
        -webkit-box-align: center;
                align-items: center;
      }

      .tg-list-item {
        margin: 0 2em;
      }

      h1 {
        font-size: 50px;
      }

      h2 {
        font-size: 40px;
        color: #777;
      }

      strong {
        margin-bottom: 30px;
        font-size: 40px;
      }

      h4 {
        color: #999;
      }

      .toggle {
        width: 35px;
        height: 35px;
      }

      #but {
        background-color: #2e2831;
        border: 1px solid white;
        color: white;
        size: 40ch;
        width: 300px;
        height: 100px;
        font-size: 60px;
        position: absolute;
        border-top-left-radius: 30px;
        border-top-right-radius: 30px;
        border-bottom-left-radius: 30px;
        border-bottom-right-radius: 30px;
        top: 80%;
        left: 340px;
      }
      .butcon {
        margin-left: -150px;
        padding-top: 40px;
      }
      #boy {
        border-top-left-radius: 30px;
        border-top-right-radius: 30px;
        border-bottom-left-radius: 30px;
        border-bottom-right-radius: 30px;
        margin-right: -10px;
        height: 80px;
        width: 200px;
        font-size: 40px;
      }
      #girl {
        border-top-left-radius: 30px;
        border-top-right-radius: 30px;
        border-bottom-left-radius: 30px;
        border-bottom-right-radius: 30px;
        margin-left: 30px;
        height: 80px;
        width: 200px;
        font-size: 40px;
      }
      #btn_group button {
        border: 1px solid #2e2831;
        background-color: gray;
        color: white;
        padding: 5px;
        margin-top: 100px;
      }
      #btn_group button:hover{
        color:white;
        background-color: gray;
      }
      #main{
        height: 1100px;
      }
      .togcon {
        margin-top: 300px;
        padding-left: 100px;
      }
      </style>
  </head>
  <body>
    <div id="main">
      <div id="page1">
          <!--<h1>Nearbuy Test Page</h1>-->
          <h1>성별을 선택해주세요.<h1>
          <div id="btn_group">
            <button id="boy" onclick="button_clicked('gender', 1)">남자</button>
            <button id="girl" onclick="button_clicked('gender', 2)">여자</button>
          </div>
          
          <div class="togcon">
            <strong>정보수집에 동의</strong>
            <input type="checkbox" id="check" class="toggle"></input>
          </div>
          <div class="butcon">
            <button class="button" id="but" value="Next" onclick="nextpage1();">NEXT!</button>
          </div>
        </div>
      <div id="page2">
  
      </div>
      <div id="page3">
  
      </div>
  </body>
    
</html>
<script src="post.js"></script>
<script src="https://code.jquery.com/jquery-1.11.3.js"></script>
<script src="./post.js"></script>
<script>
var gender = 0; // 남자면 1, 여자면 2

function button_center()
{
  document.getElementById("but").style = "left: 340;"
}

// 두번째 페이지 구성
function nextpage1() { 
    console.log("page2");
    if(gender === 0)
    {
        alert("성별을 체크해주세요");
        return;
    }
    else if (document.getElementById('check').checked === false)
    {
        alert('정보 수집에 동의해주세요')
        return;
    }
    // UI 구성
    document.getElementById("main")
        .removeChild(document.getElementById("page1"));
    
    var h1 = document.createElement("h1");
    h1.innerHTML = "버튼을 눌러 캡슐을 뽑으세요!";

    var h2 = document.createElement("h1");
    h2.innerHTML = "코로나 극복하고 수능 대박냅시다~!";

    var button = document.createElement("button");
    button.innerHTML = "OPEN!";
    button.setAttribute("id", "but");
    button.setAttribute("onclick", "nextpage2();");
    var buttoncont = document.createElement("div");
    buttoncont.setAttribute("class", "butcon");

    var container = document.getElementById("page2");
    container.appendChild(h1);
    container.appendChild(h2);
    container.appendChild(buttoncont);

    buttoncont.appendChild(button);
}

// 세번째 페이지 구성
function nextpage2() { 
    console.log("page3");

    var data = {
      gender: 0
    };

    data.gender = gender;
    // TODO: 사물함에 요청 보내기

    //callPost(data);

    // UI 구성
    document.getElementById("main")
      .removeChild(document.getElementById("page2"));

    var h1 = document.createElement("h1");
    h1.innerHTML = "포춘 쿠키가 광탈합니다!";
    var h1_ = document.createElement("h1");
    h1_.innerHTML = "응원받고 힘내세요~";

    var h2 = document.createElement("h2");
    h2.innerHTML = "남은 " + getDDay() + "일";
    var h2_ = document.createElement("h2");
    h2_.innerHTML = "화이팅입니다!";

    var container = document.getElementById("page3");
    container.appendChild(h1);
    container.appendChild(h1_);
    container.appendChild(h2);
    container.appendChild(h2_);

    //callPost();
}
 

// D-day 계산
function getDDay() {
    var today = new Date();
    console.log(today);
    var d_day = new Date();
    d_day.setFullYear(2020);
    d_day.setMonth(11);
    d_day.setDate(3);
    d_day.setHours(0);
    d_day.setMinutes(0);
    d_day.setSeconds(0);
    console.log(d_day);
    console.log(d_day - today);

    return (parseInt((d_day - today) / (1000*60*60*24) + 1)).toString();
}

// 성별 버튼 클릭 함수
function button_clicked(type, value) {
    button_clear_gender(type);

    if(type === "gender")
    {
      gender = value; // 남자면 1, 여자면 2
      console.log("성별: 남자면 1, 여자면 2  =>   " + gender);
      check_gender(value);
    }
}
// 성별 버튼 리셋
function button_clear_gender()
{
    document.getElementById("boy").style = "";
    document.getElementById("girl").style = "";
}

function check_gender(value)
{
    if(value === 1) // 남자 체크
    {
        document.getElementById("boy").style = "background-color: black;"
    }
    else if (value === 2) // 여자 체크
    {
      document.getElementById("girl").style = "background-color: black;"
    }
    else 
      return;
}


</script>